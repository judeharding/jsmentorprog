<!DOCTYPE html>
<html>
<body>

  <form name="myForm" action="index.html" method="post">

    <div>
      First name: <span style="color:red">*</span><br>
      <input type="text" id="fname" name="fname" value="" onblur="sayHello()">
    </div>

    <!-- e mail field -->
    <div>
      E-mail: <span style="color:red">*</span><br>
      <input type="text" id="email" name="email" value="" onblur="checkEmail()" >
    </div>
    <div id="invalidEmailMsg"></div>

    <!-- birthday field -->
    <div>
      Birthday: <span style="color:red">*</span><br>
      <input type="text" id="birthday" name="birthday" value="" onblur="checkBirthday()">
    </div>

    <div id="submitButton">
      <button type="submit" name="submit">Return Home</button>
    </div>



  </form>

    <!-- this div displays the first name on blur of the field  -->
    <div id="displayFN"></div>

    <!-- this div displays the email on blur of the field  -->
    <div id="displayEmail"></div>

    <!-- this div displays the email on blur of the field  -->
    <div id="displayBirthdayMinutes"></div>
    <div id="displayBirthdayHours"></div>
    <div id="displayBirthdayDays"></div>
    <div id="displayBirthdayYears"></div>

</body>

<script type="text/javascript">

    var firstname = document.getElementById('fname');
    var email = document.getElementById('email');
    var birthday = document.getElementById('birthday');

    firstname.focus();

    document.getElementById('submitButton').style.visibility = 'hidden';

    function sayHello() {
        displaySubmitButton();
        if (firstname.value != "") {
            document.getElementById("displayFN").innerHTML = "hello " + firstname.value;
        }
    }

    function checkEmail() {
        if (email.value != "") {
            document.getElementById("displayEmail").innerHTML = "your email is " + email.value;
            validateForm();
        }
        displaySubmitButton();
    }

    function validateForm() {
        var x = document.getElementById("email").value;
        var atpos = x.indexOf("@");
        var dotpos = x.lastIndexOf(".");
        if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length) {
            document.getElementById("email").value = "";
            email.focus();
            document.getElementById("invalidEmailMsg").innerHTML = "enter a GOOD e-mail address - LOSER  ";
            return false;
        } else {
            if (document.getElementById("invalidEmailMsg").innerHTML == "") {
                displaySubmitButton();
            } else {
                document.getElementById("invalidEmailMsg").innerHTML = "";
                displaySubmitButton();
            }
        }
    }

    function checkBirthday() {
        displaySubmitButton();
        if (birthday.value != "") {
            var prevTime = new Date(birthday.value);  // birthday
            var thisTime = new Date();              // now
            var diff = thisTime.getTime() - prevTime.getTime();   // now - birthday
            document.getElementById("displayBirthdayMinutes").innerHTML = "you are " + diff/(1000*60) + " minutes old.";
            document.getElementById("displayBirthdayHours").innerHTML = "you are " + diff/(1000*60*60) + " hours old.";
            document.getElementById("displayBirthdayDays").innerHTML = "you are " + diff/(1000*60*60*24) + " days old.";
            document.getElementById("displayBirthdayYears").innerHTML = "you are " + diff/(1000*60*60*24*365) + " years old.";
        }
    }

    function displaySubmitButton(){
        if ((firstname.value != "") && (email.value != "") && (birthday.value != "")) {
            document.getElementById('submitButton').style.visibility = 'visible';
        } else{
            document.getElementById('submitButton').style.visibility = 'hidden';
        }
    }

</script>

<!-- <script src="app.js" charset="utf-8"></script> -->
</html>

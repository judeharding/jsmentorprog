<!DOCTYPE html>
<html>
<body>

  <form name="myForm" action="index.html" method="post">

    <div>
      First name: <span style="color:red">*</span><br>
      <input type="text" id="fname" name="fname" value="" onblur="sayHello()">
    </div>

    <!-- e mail field -->
    <div>
      E-mail: <span style="color:red">*</span><br>
      <input type="text" id="email" name="email" value="" onblur="checkEmail()" >
    </div>
    <div id="invalidEmailMsg"></div>

    <!-- birthday field -->
    <div>
      Birthday: <span style="color:red">*</span><br>
      <input type="text" id="birthday" name="birthday" value="" onblur="checkBirthday()">
    </div>

    <div>
      <button type="submit" name="submit">Return Home</button>
  </div>



  </form>

    <!-- this div displays the first name on blur of the field  -->
    <div id="displayFN"></div>

    <!-- this div displays the email on blur of the field  -->
    <div id="displayEmail"></div>

    <!-- this div displays the email on blur of the field  -->
    <div id="displayBirthdayMinutes"></div>
    <div id="displayBirthdayHours"></div>
    <div id="displayBirthdayDays"></div>
    <div id="displayBirthdayYears"></div>

</body>

<script type="text/javascript">
    function sayHello() {
        // var firstname = document.myForm.fname.value;
        var firstname = document.getElementById("fname").value;
        document.getElementById("displayFN").innerHTML = "hello " + firstname;
    }

    function checkEmail() {
        // var email = document.myForm.email.value;
        var email = document.getElementById("email").value;
        console.log(email);
        document.getElementById("displayEmail").innerHTML = "your email is " + email;

        validateForm();
    }

    function validateForm() {
        var x = document.getElementById("email").value;
        var atpos = x.indexOf("@");
        var dotpos = x.lastIndexOf(".");
        if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length) {
            document.getElementById("email").value = "";
            document.getElementById("invalidEmailMsg").innerHTML = "enter a GOOD e-mail address -loser ";
            return false;
        } else {
            if (document.getElementById("invalidEmailMsg").innerHTML == "") {
                // do nothing
            } else {
                document.getElementById("invalidEmailMsg").innerHTML = "";
            }
        }
    }

    function checkBirthday() {
        var birthday = document.getElementById("birthday").value;
        var prevTime = new Date(birthday);  // birthday
        var thisTime = new Date();              // now
        var diff = thisTime.getTime() - prevTime.getTime();   // now - birthday
        // alert(diff / (1000*60*60*24*365));     // positive number of days
        // console.log(diff);
        document.getElementById("displayBirthdayMinutes").innerHTML = "you are " + diff/(1000*60) + " minutes old.";
        document.getElementById("displayBirthdayHours").innerHTML = "you are " + diff/(1000*60*60) + " hours old.";
        document.getElementById("displayBirthdayDays").innerHTML = "you are " + diff/(1000*60*60*24) + " days old.";
        document.getElementById("displayBirthdayYears").innerHTML = "you are " + diff/(1000*60*60*24*365) + " years old.";
    }
</script>

<!-- <script src="app.js" charset="utf-8"></script> -->
</html>
